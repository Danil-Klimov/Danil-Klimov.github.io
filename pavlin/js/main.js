"use strict";$(document).ready(function(){const e=document.getElementsByClassName("gallery__img");let t=[];for(let i=0;i<e.length;i++)t.push(e[i].outerHTML);function i(){$(".welcome__slider").booklet({width:740,height:380,shadows:!1,hovers:!1,pageNumbers:!1,next:".welcome__next",prev:".welcome__prev",create:function(e,t){0===t.index&&$(".welcome__prev").hide()},change:function(e,t){0===t.index?$(".welcome__prev").fadeOut():$(".welcome__prev").fadeIn(),t.index===$(".welcome__slide").length-2?$(".welcome__next").fadeOut():$(".welcome__next").fadeIn()}})}function s(){$(".gallery__slider").slick({infinite:!1,slidesToShow:1,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right gallery__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left gallery__prev"><div></div></button>',responsive:[{breakpoint:575,settings:{adaptiveHeight:!0}}]})}function o(e,t){if(!e.length)return;const i=$(window).scrollTop(),s=e.parent().offset().top;e.css("transform","translate3d(0,"+(s-i)*t+"px, 0)")}function n(){let e=0;$(".menu__book").each(function(){e++,$(this).addClass("menu-book-"+e).booklet({width:"894px",height:"618px",shadows:!1,hovers:!1,pageNumbers:!1,pagePadding:null,next:$(this).siblings(".menu__next"),prev:$(this).siblings(".menu__prev"),create:function(e,t){0===t.index&&$(this).siblings(".menu__prev").hide()},change:function(e,t){0===t.index?$(this).siblings(".menu__prev").fadeOut():$(this).siblings(".menu__prev").fadeIn(),t.index===$(this).find(".menu__page").length-2?$(this).siblings(".menu__next").fadeOut():$(this).siblings(".menu__next").fadeIn()}}),e=0})}function r(){$(".reviews__slider_other").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right reviews__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left  reviews__prev"><div></div></button>',responsive:[{breakpoint:769,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]})}$(window).on("load resize",function(){if($(window).width()<=768)$(".gallery__slider").slick("unslick"),$(".gallery__slider").html(t),s();else{let e=t.slice();$(".gallery__slider").slick("unslick"),$(".gallery__slider").html("");for(let i=0;i<t.length/4;i++)$(".gallery__slider").append('<div class="gallery__slide"><div class="gallery__grid">'+e.splice(0,4).join("")+"</div></div>");s()}$(window).width()<=992?($(".menu__book.booklet").booklet("destroy"),$(".menu__book").attr("style",""),$(".menu__book").not(".slick-initialized").slick({slidesToShow:1,nextArrow:'<button class="arrow arrow_right menu__right"><div></div></button>',prevArrow:'<button class="arrow arrow_left menu__left"><div></div></button>'}),$(".album__slider-mob").not(".slick-initialized").slick({slidesToShow:1,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right album__right-mob"><div></div></button>',prevArrow:'<button class="arrow arrow_left album__left-mob"><div></div></button>'})):($(".menu__book").hasClass("slick-initialized")&&$(".menu__book").slick("unslick"),n()),$(window).width()<=575?($(".welcome__slider.booklet").booklet("destroy"),$(".welcome__slider").attr("style",""),$(".welcome__slider").not(".slick-initialized").slick({slidesToShow:1,nextArrow:'<button class="arrow arrow_right welcome_right"><div></div></button>',prevArrow:'<button class="arrow arrow_left welcome_left"><div></div></button>'})):($(".welcome__slider").hasClass("slick-initialized")&&$(".welcome__slider").slick("unslick"),i())}),$(".header__nav-btn").on("click",function(){$(".nav-modal").fadeToggle()}),$(document).mouseup(function(e){const t=$(".nav-modal__wrapper");t.is(e.target)||0!==t.has(e.target).length||$(".nav-modal").fadeOut()}),i(),$(".dishes__slider").slick({slidesToShow:4,nextArrow:'<button class="arrow arrow_right dishes_right"><div></div></button>',prevArrow:'<button class="arrow arrow_left dishes_left"><div></div></button>',infinite:!1,responsive:[{breakpoint:1201,settings:{slidesToShow:3}},{breakpoint:993,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1}}]}),$('[data-fancybox="dishes"]').fancybox({btnTpl:{arrowLeft:'<button data-fancybox-prev class="fancybox-button arrow arrow_left dish-popup__Left" title="{{PREV}}"><div></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button arrow arrow_right dish-popup__right" title="{{NEXT}}"><div></div></button>'}}),s(),$(".features__slider").slick({infinite:!0,slidesToShow:5,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right features__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left features__prev"><div></div></button>',responsive:[{breakpoint:1201,settings:{slidesToShow:4}},{breakpoint:993,settings:{slidesToShow:3}},{breakpoint:769,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]}),$(".offer__slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,nextArrow:'<button class="arrow arrow_right offer__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left offer__prev"><div></div></button>'}),$(".reviews__slider_main").slick({infinite:!0,slidesToShow:4,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right reviews__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left  reviews__prev"><div></div></button>',responsive:[{breakpoint:993,settings:{slidesToShow:3}},{breakpoint:769,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]}),$(window).bind("scroll",function(e){o($("#leaves__item-1"),.1),o($("#leaves__item-2"),.6),o($("#leaves__item-3"),-.2),o($("#leaves__item-4"),.5),o($("#leaves__item-5"),-.4),o($("#leaves__item-6"),.5),o($("#leaves__item-7"),.4),o($("#leaves__item-8"),.1),o($("#leaves__item-9"),1),o($("#leaves__item-10"),.2),o($("#leaves__item-11"),-.1),$(window).scrollTop()>=200?$(".header__nav-wrapper").addClass("is_active"):$(".header__nav-wrapper").removeClass("is_active")}),$("[data-modal]").on("click",function(){const e=$(this).data("modal");$.fancybox.open({src:"#modal_"+e,type:"inline"})}),function(){let e=0;$(".album__slider").each(function(){e++,$(this).addClass("album__slider-"+e).booklet({width:"90%",height:"92%",shadows:!1,hovers:!1,pageNumbers:!1,next:$(this).siblings(".album__next"),prev:$(this).siblings(".album__prev"),create:function(e,t){0===t.index&&$(this).siblings(".album__prev").hide()},change:function(e,t){console.log(t.index),console.log($(this).find(".album__slide").length),0===t.index?$(this).siblings(".album__prev").fadeOut():$(this).siblings(".album__prev").fadeIn(),t.index+2>=$(this).find(".album__slide").length?$(this).siblings(".album__next").fadeOut():$(this).siblings(".album__next").fadeIn()}}),e=0})}(),n(),$(".menu__slider").slick({infinite:!1,slidesToShow:3,nextArrow:'<button class="arrow arrow_right"><div></div></button>',prevArrow:'<button class="arrow arrow_left"><div></div></button>',responsive:[{breakpoint:993,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1}}]}),$(".reviews__slider_hand").slick({infinite:!0,slidesToShow:5,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right reviews__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left  reviews__prev"><div></div></button>',responsive:[{breakpoint:1201,settings:{slidesToShow:4}},{breakpoint:993,settings:{slidesToShow:3}},{breakpoint:769,settings:{slidesToShow:2}},{breakpoint:576,settings:{slidesToShow:1}}]}),$(".reviews__slider_online").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right reviews__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left  reviews__prev"><div></div></button>',responsive:[{breakpoint:993,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1}}]}),r(),$(".reviews-other").on("click",".reviews-other__tab",function(e){e.preventDefault(),$(".reviews-other__tab").removeClass("reviews-other__tab_active"),$(this).addClass("reviews-other__tab_active");const t=$(this).data("cat");$(".reviews-other__container").removeClass("reviews-other__container_active"),$('.reviews-other__container[data-cat="'+t+'"]').addClass("reviews-other__container_active"),$(".reviews__slider_other").slick("unslick"),r()}),$(".recommendations__slider").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,nextArrow:'<button class="arrow arrow_right recommendations__next"><div></div></button>',prevArrow:'<button class="arrow arrow_left  recommendations__prev"><div></div></button>',responsive:[{breakpoint:1201,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1}}]}),$("form").on("submit",function(e){e.preventDefault();const t=$(this),i=t.find(".error"),s=$(this).find(".g-recaptcha");let o=$(this).find(".g-recaptcha-response").val();const n={client_name:t.find('.input[name="client_name"]').prop("value"),client_tel:t.find('.input[name="client_tel"]').prop("value"),client_email:t.find('.input[name="client_email"]').prop("value"),client_message:t.find('.input[name="client_message"]').prop("value"),form_name:t.data("name")};return s.length&&!o?(i.html("Подтвердите что вы не робот"),!1):(i.html(""),n.client_tel.length<15?(i.html("Некорректно введен номер телефона"),!1):void($(this).hasClass("form_call")&&$.ajax({type:"POST",url:window.wp_data.ajax_url+"?action=send_mail",data:n,success:function(){t.trigger("reset"),$.fancybox.open({src:"<div>Спасибо "+n.client_name+". Ваша заявка отправлена.</div>",type:"inline",modal:!0}),0!=s.length&&grecaptcha.reset(s.attr("data-widget-id")),setTimeout(function(){$.fancybox.close(!0)},2e3)}})))}),$("#file").on("change",function(){$(".file-name").html(this.files[0].name)}),$(".form_upload").on("submit",function(e){e.stopPropagation(),e.preventDefault();const t=$(this).find(".g-recaptcha");let i=$(this).find(".g-recaptcha-response").val();const s=$(this);let o=new FormData;if(o.append("action","ajax_fileload"),o.append("post_id",$(".upload")),o.append("client_name",$(this).find('.input[name="client_name"]').prop("value")),o.append("client_tel",$(this).find('.input[name="client_tel"]').prop("value")),o.append("client_message",$(this).find('.input[name="client_message"]').prop("value")),o.append("form_name",$(this).data("name")),o.append("file",$("#file").prop("files")[0]),$(this).find(".button").html("Загрузка..."),t.length&&!i)return $(".error").html("Подтвердите что вы не робот"),!1;$(".error").html(""),$.ajax({url:window.wp_data.ajax_url+"?action=send_file",type:"POST",data:o,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(e,i,o){s.trigger("reset"),$.fancybox.open({src:"<div>Спасибо. Ваша заявка отправлена.</div>",type:"inline",modal:!0}),0!=t.length&&grecaptcha.reset(t.attr("data-widget-id")),setTimeout(function(){$.fancybox.close(!0)},2e3),$(".form_upload").find(".button").html("ОТПРАВИТЬ"),$(".file-name").html("")},error:function(e,t,i){console.log("ОШИБКА AJAX запроса: "+t)}})}),$('.input[type="tel"]').on("focus",function(){$(this).mask("+7(000)000-00-00"),$(this).val("+7(")}),$(".show").on("click",function(){$(this).siblings(".hidden").addClass("visible"),$(this).hide()}),$(".posts__button").click(function(){$(this).text("Загружаю...");let e={action:"loadmore",query:true_posts,page:current_page};$.ajax({url:ajaxurl,data:e,type:"POST",success:function(e){e?($(".posts__button").text("ПОКАЗАТЬ ЕЩЕ"),$(".post:last-child").after(e),current_page++,current_page==max_pages&&$(".posts__button").remove()):$(".posts__button").remove()}})}),svg4everybody()});